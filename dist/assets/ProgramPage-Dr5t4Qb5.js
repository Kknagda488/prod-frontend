import{p as L,r as c,j as e,Q as T,W as Q,V as X,N as K,q as P,X as te,U as ae,Y as re,Z as H,m as le,$ as ne,a0 as ce}from"./index-PDBVLXQN.js";import{V as oe}from"./index.esm-ORUzbmJe.js";import{U as ie}from"./index-C4eFUQ8P.js";import{C as W}from"./index.esm-3mRNvFvF.js";import{B as Z}from"./index.esm-Brun24un.js";import{D as G}from"./DeletePopCard-DGkzH1cc.js";import{v as ee}from"./v4-D8aEg3BZ.js";import{r as de}from"./readXlsxFileBrowser-5wfj6eDS.js";import{B as me}from"./index.esm-DAu5s7pT.js";import"./FileSaver.min-C8VLTI_m.js";import"./xlsx-B1Xcmx07.js";function se({setCsv:s,setButtonR:i}){const{userData:r}=L(),[b,t]=c.useState("Select a file..."),y=a=>{if(a.target.files.length===0)return;const p=a.target.files[0];t(p.name),de(p).then(d=>{d.shift();let g=[];d.forEach(l=>{let m;switch(r==null?void 0:r.client){case"axis":m={firstName:l[0],lastName:l[1],email:l[2],employeeId:l[3],mobileNo:l[4],city:l[5],managerName:l[6],managerEmail:l[7],function:l[8],role:l[9],zone:l[10],product:l[11]};break;case"idfc":m={firstName:l[0],lastName:l[1],email:l[2],city:l[3],managerName:l[4],managerEmail:l[5]};break;case"kotak":m={fullName:l[0],employeeId:l[1],referenceCode:l[2],branchName:l[3]};break;default:console.error("Unknown client:",r==null?void 0:r.client);return}g.push(m)}),console.log("tutorials",JSON.stringify(g)),s(g)}).catch(d=>{console.error("Error reading file:",d)})};return e.jsx("div",{className:"flex flex-col space-y-3",children:e.jsxs("span",{htmlFor:"files",className:"relative flex w-full items-center bg-gray-200 rounded-md cursor-pointer ",children:[e.jsx("input",{id:"files",name:"files",className:"absolute w-full opacity-0",type:"file",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",onChange:y}),e.jsx("span",{className:"flex rounded-l-lg py-3 text-sm px-5 h-full bg-sky-500 text-white w-fit",children:"Choose Your File"}),e.jsx("p",{className:"text-sm font-medium  px-6 text-gray-700",children:b})]})})}function xe({programId:s,nominees:i,setShowPopup:r,programDetails:b,setSelectedNominees:t,fetchNomineesList:y}){console.log(i);const{userData:a}=L(),p=async d=>{d.preventDefault();var g={};Array.from(d.currentTarget.elements).forEach(x=>{x.name&&(g[x.name]=x.value)}),s&&(g.programId=s),i&&(g.file=JSON.stringify(i));let l=new URLSearchParams(Object.entries(g)).toString();await(await fetch(`http://15.206.237.179:8000/api/batches/add?access_token=${a==null?void 0:a.accessToken}`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:l})).json(),T.success("Batch created successfully!"),r(!1),y(),t([]),d.target.reset()};return e.jsx("div",{className:"flex flex-col w-full justify-center  ",children:e.jsx("div",{className:"relative py-5 w-full  px-1 ",children:e.jsx("div",{className:"relative px-4 py-10  rounded-md  bg-white ",children:e.jsxs("div",{className:"w-full mx-auto",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-14 w-14 bg-sky-500 rounded-full flex flex-shrink-0 justify-center items-center text-white text-2xl font-semibold",children:e.jsx(W,{})}),e.jsxs("div",{className:"block pl-2 font-semibold text-xl self-start text-gray-700",children:[e.jsx("h2",{className:"leading-relaxed",children:"Create a Batch"}),e.jsx("p",{className:"text-sm text-gray-500 font-normal leading-relaxed",children:"Enter the Batch details to display it in Batch List."})]})]}),e.jsxs("form",{id:"addpath",method:"POST",onSubmit:p,className:"divide-y divide-gray-200",children:[e.jsx("div",{className:"flex flex-col w-full justify-between py-8 text-base leading-6 space-x-4 text-gray-700 sm:text-lg sm:leading-7",children:e.jsxs("div",{className:"flex flex-col w-full space-y-1",children:[e.jsx("label",{className:"leading-loose",children:"Batch Name*"}),e.jsx("input",{type:"text",name:"name",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Batch Name",required:!0}),b.trainingType=="2"?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"leading-loose",children:"Location*"}),e.jsx("input",{type:"text",name:"location",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Location",required:!0})]}),e.jsx("label",{className:"leading-loose",children:"Batch Start Date *"}),e.jsx("input",{type:"date",name:"batchStartDate",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Batch Start Date",required:!0}),e.jsx("label",{className:"leading-loose",children:"Batch Start Time *"}),e.jsx("input",{type:"time",name:"batchStartTime",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Batch Start time",required:!0}),e.jsx("label",{className:"leading-loose",children:"Batch End Date*"}),e.jsx("input",{type:"date",name:"batchEndDate",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Batch End Date",required:!0}),e.jsx("label",{className:"leading-loose",children:"Batch End Time *"}),e.jsx("input",{type:"time",name:"batchEndTime",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Batch End Time",required:!0}),e.jsx("label",{className:"leading-loose",children:"Status*"}),e.jsxs("select",{name:"status",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[e.jsx("option",{value:"1",children:"Active"}),e.jsx("option",{value:"0",children:"In Active"})]})]})}),e.jsx("div",{className:"py-0 flex items-center  justify-center space-x-4",children:e.jsx("button",{type:"submit",className:"bg-sky-500 flex justify-center items-center w-full text-white px-4 py-3 rounded-md focus:outline-none",children:"Create Batch"})})]})]})})})})}function ue({programId:s,programDetails:i}){const{userData:r,signOut:b}=L(),[t,y]=c.useState(1),[a,p]=c.useState(30),[d,g]=c.useState(1),[l,m]=c.useState([]),[x,C]=c.useState(""),[h,j]=c.useState([]),[Y,O]=c.useState(!1),[f,B]=c.useState(!1),[q,w]=c.useState(null),[_,I]=c.useState(!1),[M,V]=c.useState([]),o=async()=>{try{const u=encodeURIComponent(JSON.stringify({pageLimit:a,pageNo:t,search:x})),N=await fetch(`http://15.206.237.179:8000/api/nominees/list/program/${s}?filter=${u}&access_token=${r==null?void 0:r.accessToken}`);if(!N.ok){const z=$&&$.message||N.statusText;return Promise.reject(z)}const $=await N.json();V($.data.allProgramNominees),m($.data.allProgramNominees),g($.data.lastPage)}catch(n){console.error("There was an error!",n),(n==="Token Expired"||n==="Malformed User")&&b()}},v=()=>{t>=d||y(t+1)},S=()=>{t<=1||y(t-1)};c.useEffect(()=>{s&&o()},[s,a,t,x]);const R=n=>{const{name:u}=n.target,N=parseInt(u);j($=>$.includes(N)?$.filter(z=>z!==N):[...$,N])},J=()=>{if(h.length===0)return T.error("Please select nominees.");const n=[["First Name","Last Name","Email","Manager Name","Manager Email"]];M.forEach(u=>{h.includes(u.nomineeId)&&n.push([u.firstName,u.lastName,u.email,u.managerName,u.managerEmail])}),ie.exportAoaToXlsx(n,i.programName)},k=[];M.forEach(n=>{h.includes(n.nomineeId)&&k.push({firstName:n.firstName,lastName:n.lastName,email:n.email,mobileNo:n.mobileNo})});const E=async n=>{n.preventDefault();try{if(console.log(l.length),!h.length)return T.error("Please select nominees");var u={};const N=[];M.forEach(D=>{h.includes(D.nomineeId)&&N.push({firstName:D.firstName,lastName:D.lastName,email:D.email,mobileNo:D.mobileNo})}),Array.from(n.currentTarget.elements).forEach(D=>{D.name&&(u[D.name]=D.value)}),N.length&&(u.file=JSON.stringify(N)),console.log(u);const $=new URLSearchParams(Object.entries(u)).toString(),z=await fetch(`http://15.206.237.179:8000/api/nominees/sendMail/${s}?access_token=${r==null?void 0:r.accessToken}`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:$}),U=await z.json();if(console.log(U),z.ok)U.status==="failure"?T.error(U==null?void 0:U.message):(T.success(U.message),j([]));else throw U&&U.message||z.statusText;n.target.reset()}catch(N){console.log(N),console.error("There was an error!",N),N==="Token Expired"&&b()}},F=async()=>{try{const n=await fetch(`http://15.206.237.179:8000/api/nominees/deleteNominee/${q.id}?access_token=${r==null?void 0:r.accessToken}`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"DELETE"}),u=await n.json();if(console.log(u),n.ok)u.status==="failure"?T.error(u==null?void 0:u.msg):(T.success(u.msg),w(null),B(!1),o());else throw u&&u.message||n.statusText}catch(n){console.log(n)}},A=n=>{const u=n.target.checked;if(u){const N=[];M.forEach($=>{h.includes($.nomineeId)||N.push($.nomineeId)}),j($=>[...$,...N])}else j([]);I(u)};return console.log(h,"selectedNominees"),e.jsxs("div",{className:"mx-3",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("span",{style:{marginTop:"-10px",marginBottom:"10px"},className:"text-sm ",children:e.jsx(Z,{className:"cursor-pointer",onClick:()=>o(),size:20})})}),f?e.jsx("div",{className:"fixed z-30  w-full h-screen top-0 left-0 items-center   bg-gray-800/40",children:e.jsx("div",{className:"flex w-full items-start mt-10 justify-center ",children:e.jsxs("div",{className:"relative mx-20 flex flex-col  w-1/2 items-center justify-center bg-white rounded-lg shadow-md px-8 py-2",children:[e.jsx("div",{className:"absolute z-30 bg-white flex w-full justify-end items-end top-0  p-4 "}),e.jsx("div",{id:"journal-scroll",className:"w-full max-h-[32rem] h-fit overflow-y-auto mt-8",children:e.jsx(G,{title:q.title,cancelDelete:()=>B(!1),confirmDelete:()=>F(q.id)})})]})})}):null,Y?e.jsx("div",{className:"fixed z-30  w-full h-screen top-0 left-0 items-center   bg-gray-800/40",children:e.jsx("div",{className:"flex w-full items-start mt-20 justify-center   h-screen",children:e.jsxs("div",{className:"relative mx-20 flex flex-col  w-1/2 items-center justify-center bg-white rounded-lg shadow-md px-8 py-2",children:[e.jsx("div",{className:"absolute z-30 bg-white flex w-full justify-end items-end top-0  p-4 ",children:e.jsx(Q,{onClick:()=>O(!1),className:"cursor-pointer text-xl font-semibold text-black "})}),e.jsx("div",{id:"journal-scroll",className:"w-full h-[30rem] overflow-y-auto",children:e.jsx(xe,{programId:s,nominees:k,isPopup:!0,fetchNomineesList:o,setShowPopup:O,setSelectedNominees:j,programDetails:i})})]})})}):null,e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsxs("span",{children:["Total Nominees: ",(M==null?void 0:M.length)||0]}),e.jsx("div",{className:"flex align-center",children:e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none py-2 ",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500 ",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),e.jsx("input",{type:"text",id:"table-search",className:"bg-gray-50 border py-1  border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-80 pl-10 p-2.5  ",placeholder:"Search for nominee",onChange:n=>C(n.target.value)})]})})]}),r.userType===1&&e.jsx("div",{children:e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsxs("form",{onSubmit:E,className:"flex space-x-2",children:[e.jsxs("select",{className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-30 sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",name:"type",required:!0,children:[e.jsx("option",{value:"",children:"Select Template"}),e.jsx("option",{value:"cancellation",children:"Cancellation"}),e.jsx("option",{value:"reschedule",children:"Reschedule"})]}),e.jsx("button",{className:"bg-green-500 hover:bg-green-700 text-sm text-white font-bold py-2 px-3 rounded",children:"Send"})]}),e.jsxs("div",{children:[h.length?e.jsxs("span",{className:"mr-4",children:["Selected Nominees: ",h.length]}):null,e.jsx("button",{className:"px-2 py-2 mr-2 text-sm bg-green-500 text-white rounded-md",onClick:()=>J(),children:"Export"}),h.length>0&&e.jsx("button",{onClick:()=>O(!0),className:"px-2 py-2 text-sm bg-green-500 text-white rounded-md",children:"Create Batch"})]})]})}),e.jsx("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg mt-3",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 ",children:[e.jsx("thead",{className:"text-md m-4 bg-sky-600 text-white   ",children:e.jsxs("tr",{children:[r.userType===1&&e.jsx("th",{scope:"col",className:"px-6 py-3",children:e.jsx("input",{type:"checkbox",onChange:A,className:"form-checkbox h-4 w-4 text-blue-600",checked:_})}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Sr no."}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Email"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Supervisor Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Supervisor Email"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Batch Assigned"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Actions"})]})}),l.map((n,u)=>e.jsx("tbody",{children:e.jsxs("tr",{className:"bg-white border-b",children:[r.userType===1&&e.jsx("td",{className:"px-6 py-4 text-gray-900",children:e.jsx("input",{type:"checkbox",name:n.nomineeId,checked:h.includes(n.nomineeId),onChange:R})}),e.jsx("td",{className:"px-6 py-4 text-gray-900",children:u+1}),e.jsxs("th",{scope:"row",className:"flex flex-row items-center px-6 py-4 font-medium text-gray-900  w-44",children:[n.firstName," ",n.lastName]}),e.jsx("td",{className:"px-6 py-4 text-gray-900",children:n.email}),e.jsx("td",{className:"px-6 py-4 text-gray-900",children:n.managerName}),e.jsx("td",{className:"px-6 py-4 text-gray-900",children:n.managerEmail}),e.jsx("td",{className:"px-6 py-4 text-gray-900",children:n.batch?n.batch.name:"-"}),e.jsx("div",{className:"text-red-700 flex justify-center items-center hover:underline cursor-pointer",onClick:()=>{B(!0),w({title:`${n.firstName} ${n.lastName}`,id:n.nomineeId})},children:e.jsx(X,{color:"red",size:20})})]})},ee()))]})}),e.jsxs("div",{className:"flex flex-row justify-around mt-10 items-center  ",children:[e.jsx("span",{className:"text-sm flex text-gray-700 "}),e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"dropdown flex items-center relative",children:[e.jsx("p",{children:"Show"}),e.jsx("span",{className:"bg-gray-100 text-gray-700 mx-2  font-normal tracking-wide rounded inline-flex items-center",children:e.jsxs("select",{className:"bg-transparent px-3 py-2  outline-none ",value:a,onChange:n=>{p(n.target.value),y(1)},children:[e.jsx("option",{className:"mr-1",children:"5"}),e.jsx("option",{className:"mr-1",children:"10"}),e.jsx("option",{className:"mr-1",children:"20"}),e.jsx("option",{className:"mr-1",children:"30"}),e.jsx("option",{className:"mr-1",children:"40"}),e.jsx("option",{className:"mr-1",children:"50"}),e.jsx("option",{className:"mr-1",children:"100"}),e.jsx("option",{className:"mr-1",children:"250"}),e.jsx("option",{className:"mr-1",children:"500"})]})}),e.jsx("p",{children:"Entries"})]})}),e.jsxs("div",{children:[e.jsx("a",{onClick:()=>S(),className:` ${t===1?"hidden":"inline-flex items-center py-2 px-4 ml-3 text-sm font-medium text-gray-700 bg-gray-200 cursor-pointer rounded-lg border border-gray-300 hover:bg-gray-100 hover:text-gray-700   "}`,children:"Previous"}),e.jsx("a",{onClick:()=>v(),className:` ${t>=d?"hidden":"inline-flex items-center py-2 px-4 ml-3 text-sm font-medium text-gray-700 cursor-pointer bg-gray-200 rounded-lg border border-gray-300 hover:bg-gray-100 hover:text-gray-700   "}`,children:"Next"})]})]})]})}const he=({programDetails:s})=>{const{userData:i}=L();return console.log("Program Details:"+i.userType),e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end",children:i.userType===1&&e.jsx(K,{to:{pathname:`/program/UpdateProgram/${s.id}`},children:e.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Edit"})})}),e.jsxs("div",{style:{color:"#4b5563"},className:"flex flex-col text-base font-medium",children:[e.jsxs("div",{className:"flex mb-2",children:[e.jsx("div",{className:"w-1/3 pr-2 ",children:"Client Name"}),e.jsxs("div",{className:"w-2/3 ",children:[" ",s.clientName]})]}),e.jsxs("div",{className:"flex mb-2",children:[e.jsx("div",{className:"w-1/3 pr-2",children:"Program Name"}),e.jsxs("div",{className:"w-2/3",children:[" ",s.programName]})]}),e.jsxs("div",{className:"flex mb-2",children:[e.jsx("div",{className:"w-1/3 pr-2",children:"Program Start Date/Time"}),e.jsx("div",{className:"w-2/3",children:P(`${P(s.programStartDate).format("YYYY-MM-DD")} ${s.programStartTime}`).format("Do MMMM YYYY hh:mm a")})]}),e.jsxs("div",{className:"flex mb-2",children:[e.jsx("div",{className:"w-1/3 pr-2",children:"Program End Date/Time"}),e.jsx("div",{className:"w-2/3",children:P(`${P(s.programEndDate).format("YYYY-MM-DD")} ${s.programEndTime}`).format("Do MMMM YYYY hh:mm a")})]}),e.jsxs("div",{className:"flex mb-2",children:[e.jsx("div",{className:"w-1/3 pr-2",children:"Program Type"}),s.programType==1?"Open":null,s.programType==0?"Close":null]}),s.programType=="1"?e.jsxs("div",{className:"flex mb-2",children:[e.jsx("div",{className:"w-1/3 pr-2",children:"Nomination End Date/Time"}),e.jsx("div",{className:"w-2/3",children:P(`${P(s.nominationDate).format("YYYY-MM-DD")} ${s.nominationTime}`).format("Do MMMM YYYY hh:mm a")})]}):null,e.jsxs("div",{className:"flex mb-2",children:[e.jsx("div",{className:"w-1/3 pr-2",children:"Training Mode"}),s.trainingType===1?"Class room training":null,s.trainingType===2?"Virtual training":null]}),s.trainingType===1?e.jsxs("div",{className:"flex mb-2",children:[e.jsx("div",{className:"w-1/3 pr-2",children:"Location"}),s.location]}):null]}),i.userType===1?e.jsx(e.Fragment,{children:s.programType=="1"?e.jsxs("div",{style:{color:"#4b5563"},className:"flex",children:[e.jsx("div",{className:"w-1/3 pr-2 font-medium",children:"Registration Link"}),e.jsx("div",{className:"w-1/3",children:e.jsx("a",{href:`/nominee-form/${s.id}?client=${i==null?void 0:i.client}&key=${i==null?void 0:i.tenantKey}`,target:"_blank",rel:"noreferrer",children:`http://15.206.237.179:8000/nominee-form/${s.id}`})})]}):null}):null]})},pe=({programId:s,programDetails:i})=>{const[r,b]=c.useState([]),{userData:t,signOut:y}=L(),a=async p=>{p.preventDefault();var d={};Array.from(p.currentTarget.elements).forEach(x=>{x.name&&(d[x.name]=x.value)}),s&&(d.programId=s),r&&(d.file=JSON.stringify(r)),console.log(r);let g=new URLSearchParams(Object.entries(d)).toString();const l=await fetch(`http://15.206.237.179:8000/api/batches/add?access_token=${t==null?void 0:t.accessToken}`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:g}),m=await l.json();if(l.ok)T.success("Batch created successfully!");else{const x=m&&m.msg||l.statusText;T.error(x)}p.target.reset()};return e.jsx("div",{children:e.jsx("form",{onSubmit:a,children:e.jsxs("div",{className:"flex flex-col mt-3 justify-center",children:[e.jsxs("div",{className:"flex flex-wrap",children:[e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Batch Name*"}),e.jsx("input",{type:"text",name:"name",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Batch Name",required:!0})]}),i.trainingType=="1"?e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Location*"}),e.jsx("input",{type:"text",name:"location",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Location",required:!0})]}):null,e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Batch Start Date*"}),e.jsx("input",{type:"date",name:"batchStartDate",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",required:!0})]}),e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Batch Start Time*"}),e.jsx("input",{type:"time",name:"batchStartTime",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",required:!0})]}),e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Batch End Date*"}),e.jsx("input",{type:"date",name:"batchEndDate",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",required:!0})]}),e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Batch End Time*"}),e.jsx("input",{type:"time",name:"batchEndTime",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",required:!0})]})]}),t.client=="axis"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-wrap",children:[e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Status*"}),e.jsxs("select",{placeholder:"Select status",name:"status",required:!0,className:"px-4 py-2bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[e.jsx("option",{value:"1",children:"Active"}),e.jsx("option",{value:"0",children:"In Active"})]})]}),e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Assessment Status*"}),e.jsxs("select",{placeholder:"Select Assessment status",name:"assessmentStatus",required:!0,className:"px-4 py-2 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[e.jsx("option",{value:"inside",children:"Inside"}),e.jsx("option",{value:"outside",children:"Outside"})]})]})]})}):e.jsxs("div",{className:"w-full px-2",children:[e.jsx("label",{className:"leading-loose",children:"Status*"}),e.jsxs("select",{placeholder:"Select status",name:"status",required:!0,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[e.jsx("option",{value:"1",children:"Active"}),e.jsx("option",{value:"0",children:"In Active"})]})]}),e.jsxs("div",{className:"w-full px-2",children:[e.jsx("label",{className:"leading-loose",children:"Excel File*"}),e.jsx(se,{setCsv:b})]}),e.jsx("button",{className:`flex w-fit mt-5 px-6 py-3 text-white text-sm font-medium\r
                    bg-green-500 items-center rounded-md`,type:"submit",children:"Create Batch"})]})})})};function fe({batchId:s,setShowPopup:i,fetchBatchList:r,programDetails:b}){var l;const[t,y]=c.useState({}),{userData:a,signOut:p}=L(),d=async()=>{try{const m=await fetch(`http://15.206.237.179:8000/api/batches/batchDetails/${s}?access_token=${a==null?void 0:a.accessToken}`),x=await m.json();if(console.log(x.data+"fetchBatch"),y(x.data),!m.ok){const C=x&&x.message||m.statusText;return Promise.reject(C)}}catch(m){console.error("There was an error!",m),m==="Token Expired"&&p()}};c.useEffect(()=>{d()},[]);const g=async m=>{m.preventDefault();var x={};Array.from(m.currentTarget.elements).forEach(j=>{j.name&&(x[j.name]=j.value)});let C=new URLSearchParams(Object.entries(x)).toString();await(await fetch(`http://15.206.237.179:8000/api/batches/edit/${s}?access_token=${a==null?void 0:a.accessToken}`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:C})).json(),T.success("Batch updated successfully!"),i(!1),r()};return e.jsx("div",{className:"flex flex-col w-full justify-center  ",children:e.jsx("div",{className:"relative py-5 w-full  px-1 ",children:e.jsx("div",{className:"relative px-4 py-10  rounded-md  bg-white ",children:e.jsxs("div",{className:"w-full mx-auto",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-14 w-14 bg-sky-500 rounded-full flex flex-shrink-0 justify-center items-center text-white text-2xl font-semibold",children:e.jsx(W,{})}),e.jsxs("div",{className:"block pl-2 font-semibold text-xl self-start text-gray-700",children:[e.jsx("h2",{className:"leading-relaxed",children:"Update Batch"}),e.jsx("p",{className:"text-sm text-gray-500 font-normal leading-relaxed",children:"Enter new batch details."})]})]}),e.jsxs("form",{id:"addpath",method:"POST",onSubmit:g,className:"divide-y divide-gray-200",children:[e.jsx("div",{className:"flex flex-col w-full justify-between py-8 text-base leading-6 space-x-4 text-gray-700 sm:text-lg sm:leading-7",children:e.jsxs("div",{className:"flex flex-col w-full space-y-1",children:[e.jsx("label",{className:"leading-loose",children:"Batch Name*"}),e.jsx("input",{type:"text",name:"name",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Batch Name",defaultValue:t.name,required:!0}),((l=t==null?void 0:t.program)==null?void 0:l.trainingType)=="1"?e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"leading-loose",children:"Location*"}),e.jsx("input",{type:"text",name:"location",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Location",defaultValue:t.location,required:!0})]}):null,e.jsx("label",{className:"leading-loose",children:"Status*"}),e.jsxs("select",{placeholder:"Select status",name:"status",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[e.jsx("option",{value:"1",selected:t.status==1,children:"Active"}),e.jsx("option",{value:"0",selected:t.status==0,children:"In Active"})]}),e.jsx("label",{className:"leading-loose",children:"Batch Start Date*"}),e.jsx("input",{type:"date",name:"batchStartDate",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Batch start date",defaultValue:t.batchStartDate?P(t.batchStartDate).format("YYYY-MM-DD"):"",required:!0}),e.jsx("label",{className:"leading-loose",children:"Batch Start Time*"}),e.jsx("input",{type:"time",name:"batchStartTime",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Batch start time",defaultValue:t.batchStartTime,required:!0}),e.jsx("label",{className:"leading-loose",children:"Batch End Date*"}),e.jsx("input",{type:"date",name:"batchEndDate",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Batch End Date",defaultValue:t.batchEndDate?P(t.batchEndDate).format("YYYY-MM-DD"):"",required:!0}),e.jsx("label",{className:"leading-loose",children:"Batch End Time*"}),e.jsx("input",{type:"time",name:"batchEndTime",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Batch start time",defaultValue:t.batchEndTime,required:!0})]})}),e.jsx("div",{className:"py-0 flex items-center  justify-center space-x-4",children:e.jsx("button",{type:"submit",className:"bg-sky-500 flex justify-center items-center w-full text-white px-4 py-3 rounded-md focus:outline-none",children:"Update"})})]})]})})})})}function ge({programId:s,programDetails:i}){const[r,b]=c.useState({title:"",id:""}),{userData:t,signOut:y}=L(),[a,p]=c.useState(1),[d,g]=c.useState(5);c.useState(1);const[l,m]=c.useState([]),[x,C]=c.useState(""),[h,j]=c.useState(!1),[Y,O]=c.useState(0),[f,B]=c.useState(""),[q,w]=c.useState(!1);function _(o){O(o),j(!0)}const I=async()=>{try{const v=encodeURIComponent(JSON.stringify({pageLimit:d,pageNo:a,search:x})),S=await fetch(`http://15.206.237.179:8000/api/batches/list/${s}?filter=${v}&access_token=${t==null?void 0:t.accessToken}`);if(!S.ok){const J=R&&R.message||S.statusText;return Promise.reject(J)}const R=await S.json();m(R.data)}catch(o){console.error("There was an error!",o),(o==="Token Expired"||o==="Malformed User")&&y()}},M=async o=>{o.preventDefault(),console.log(f);try{if(f=="1"){const S=await(await fetch(`http://15.206.237.179:8000/api/programs/sendMangerMail?access_token=${t==null?void 0:t.accessToken}&programId=${s}`)).json();return S.status=="success"?(B(""),T.success(S.msg)):T.error(S.msg)}if(f=="2"){const S=await(await fetch(`http://15.206.237.179:8000/api/programs/sendManagerReminderMail?access_token=${t==null?void 0:t.accessToken}&programId=${s}&programDate=${i.programStartDate}`)).json();return S.status=="success"?(B(""),T.success(S.msg)):T.error(S.msg)}}catch(v){console.log(v)}};c.useEffect(()=>{s&&I()},[s]);const V=async()=>{try{const o=await fetch(`http://15.206.237.179:8000/api/batches/deleteBatch/${r.id}?access_token=${t.accessToken}`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"Delete"}),v=await o.json();if(o.ok)v.code===400?T.error(v.msg):(T.success(v.msg),I(),w(!1));else throw v&&v.message||o.statusText}catch(o){console.error("There was an error!",o),(o==="Token Expired"||o==="Malformed User")&&y()}};return e.jsxs("div",{className:"mx-3 ",children:[e.jsxs("div",{className:"flex items-center space-x-2 justify-end",children:[e.jsxs("form",{onSubmit:M,className:"flex items-center space-x-2 justify-end",children:[e.jsxs("select",{value:f,className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900  sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",required:!0,onChange:o=>B(o.target.value),children:[e.jsx("option",{value:"",children:"Select Manager mail"}),e.jsx("option",{value:"1",children:"Manager invitation mail"}),e.jsx("option",{value:"2",children:"Manager reminder mail"})]}),e.jsx("button",{className:"bg-green-500 hover:bg-green-700 text-sm text-white font-bold py-2 px-3 rounded",type:"submit",children:"Send"})]}),e.jsx("span",{className:"text-sm",children:e.jsx(Z,{className:"cursor-pointer",onClick:()=>I(),size:20})})]}),q?e.jsx("div",{className:"fixed z-30  w-full h-screen top-0 left-0 items-center   bg-gray-800/40",children:e.jsx("div",{className:"flex w-full items-start mt-10 justify-center ",children:e.jsxs("div",{className:"relative mx-20 flex flex-col  w-1/2 items-center justify-center bg-white rounded-lg shadow-md px-8 py-2",children:[e.jsx("div",{className:"absolute z-30 bg-white flex w-full justify-end items-end top-0  p-4 "}),e.jsx("div",{id:"journal-scroll",className:"w-full max-h-[32rem] h-fit overflow-y-auto mt-8",children:e.jsx(G,{title:r.title,cancelDelete:()=>w(!1),confirmDelete:()=>V(r.id)})})]})})}):null,h?e.jsx("div",{className:"fixed z-30  w-full h-screen top-0 left-0 items-center   bg-gray-800/40",children:e.jsx("div",{className:"flex w-full items-start mt-20 justify-center   h-screen",children:e.jsxs("div",{className:"relative mx-20 flex flex-col  w-1/2 items-center justify-center bg-white rounded-lg shadow-md px-8 py-2",children:[e.jsx("div",{className:"absolute z-30 bg-white flex w-full justify-end items-end top-0  p-4 ",children:e.jsx(Q,{onClick:()=>j(!1),className:"cursor-pointer text-xl font-semibold text-black "})}),e.jsx("div",{id:"journal-scroll",className:"w-full h-[30rem] overflow-y-auto",children:e.jsx(fe,{batchId:Y,isPopup:!0,setShowPopup:j,fetchBatchList:I,programDetails:i})})]})})}):null,e.jsx("div",{className:"flex flex-row justify-between",children:e.jsx("h5",{className:" text-md font-medium tracking-wide text-gray-700 lg:text-xl ",children:"Batches"})}),e.jsx("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg mt-3",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 ",children:[e.jsx("thead",{className:"text-md m-4 bg-sky-600 text-white   ",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Sr.No"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Batch Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Location"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Start Date time"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"End Date time"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Action"})]})}),l==null?void 0:l.map((o,v)=>e.jsx("tbody",{children:e.jsxs("tr",{className:"bg-white border-b  ",children:[e.jsx("td",{className:"px-6 py-4 text-gray-900",children:v+1}),e.jsx("th",{scope:"row",className:"px-6 py-4 text-gray-900",children:o.name}),e.jsxs("td",{className:"px-6 py-4 text-gray-900",children:[" ",o.location?o.location:"-"]}),e.jsxs("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900  whitespace-nowrap",children:[P(o.batchStartDate).format("Do MMM YYYY")," ",P(o.batchStartTime,"HH:mm:ss").format("hh:mm a")]}),e.jsxs("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900  whitespace-nowrap",children:[o.batchEndDate?P(o.batchEndDate).format("Do MMM YYYY"):"-"," ",o.batchEndTime?P(o.batchEndTime,"HH:mm:ss").format("hh:mm a"):"-"]}),e.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900  whitespace-nowrap",children:o.status=="1"?e.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-green-900 dark:text-green-300",children:"Active"}):e.jsx("span",{className:"bg-red-100 text-red-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-red-900 dark:text-red-300",children:"In Active"})}),e.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900  whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-red-700 mr-4 hover:underline cursor-pointer",children:e.jsx("button",{onClick:()=>{w(!0),b({title:o.name,id:o.batchId})},children:e.jsx(X,{size:24,color:"red"})})}),e.jsx("div",{className:"text-gray-700 mr-4 hover:underline cursor-pointer",children:e.jsx(K,{to:`/batch/${o.batchId}`,children:e.jsx(te,{size:24})})}),t.userType!==7&&e.jsx("div",{className:"text-gray-700 mr-4 hover:underline cursor-pointer",children:e.jsx("button",{onClick:()=>_(o.batchId),children:e.jsx(ae,{size:24})})})]})})]})},ee()))]})})]})}const ye=({programId:s,programDetails:i})=>{const[r,b]=c.useState([]);c.useState([]);const{userData:t,signOut:y}=L(),a=async p=>{p.preventDefault();var d={};Array.from(p.currentTarget.elements).forEach(m=>{m.name&&(d[m.name]=m.value)}),s&&(d.programId=s),r&&(d.file=JSON.stringify(r)),console.log(r);let g=new URLSearchParams(Object.entries(d)).toString();await(await fetch(`http://15.206.237.179:8000/api/batches/bulkBathCreate?access_token=${t==null?void 0:t.accessToken}`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:g})).json(),T.success("Batch created successfully!"),p.target.reset()};return e.jsx("div",{children:e.jsx("form",{onSubmit:a,children:e.jsxs("div",{className:"flex flex-col mt-3 justify-center",children:[e.jsx("div",{className:"flex flex-wrap",children:e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Batch Length"}),e.jsx("input",{type:"text",name:"length",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Batch Length",required:!0})]})}),e.jsxs("div",{className:"w-full px-2",children:[e.jsx("label",{className:"leading-loose",children:"User File*"}),e.jsx(se,{setCsv:b})]}),e.jsx("button",{className:`flex w-fit mt-5 px-6 py-3 text-white text-sm font-medium\r
                    bg-green-500 items-center rounded-md`,type:"submit",children:"Create Batch"})]})})})},je=({setBatchListPop:s,peoplelist:i,questionList:r,id:b,schedulePop:t,setSchedulePop:y,batchData:a,next:p,previous:d,pgindex:g,page:l,totalCount:m,setRefresher:x,setLimit:C,setPage:h,setSearch:j,getOneBatch:Y,templateList:O})=>{const[f,B]=c.useState(1),{userData:q}=L();return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-wrap",children:e.jsxs("div",{className:"w-full    rounded",children:[e.jsx("div",{className:"border-b border-gray-200  mx-5 ",children:e.jsxs("ul",{className:"flex flex-wrap space-x-3   text-sm font-medium text-center text-gray-500 ",children:[e.jsx("li",{className:"mr-1 cursor-pointer",children:e.jsxs("span",{onClick:w=>{w.preventDefault(),B(1)},className:"inline-flex p-3  rounded-t-lg   border-b-2  items-center"+(f===1?" border-sky-600 text-sky-600":"border-transparent text-gray-500"),children:[e.jsx(me,{className:"text-xl mr-2"}),"Program Details"]})}),a.programType=="1"?e.jsx("li",{className:"mr-1 cursor-pointer",children:e.jsxs("span",{onClick:w=>{w.preventDefault(),B(3)},className:"inline-flex p-3  rounded-t-lg  border-b-2  items-center"+(f===3?" border-sky-600 text-sky-600":"border-transparent text-gray-500"),children:[e.jsx(re,{className:"text-xl mr-2"}),"Nominees"]})}):null,q.userType===1&&e.jsx("li",{className:"mr-1 cursor-pointer",children:e.jsxs("span",{onClick:w=>{w.preventDefault(),B(4)},className:"inline-flex p-3  rounded-t-lg  border-b-2  items-center"+(f===4?" border-sky-600 text-sky-600":"border-transparent text-gray-500"),children:[e.jsx(oe,{className:"text-xl mr-2"}),"Batch"]})}),e.jsx("li",{className:"mr-1 cursor-pointer",children:e.jsxs("span",{onClick:w=>{w.preventDefault(),B(5)},className:"inline-flex p-3  rounded-t-lg  border-b-2  items-center"+(f===5?" border-sky-600 text-sky-600":"border-transparent text-gray-500"),children:[e.jsx(H,{className:"text-xl mr-2"}),"Batch List"]})}),e.jsx("li",{className:"mr-1 cursor-pointer",children:e.jsxs("span",{onClick:w=>{w.preventDefault(),B(6)},className:"inline-flex p-3  rounded-t-lg  border-b-2  items-center"+(f===6?" border-sky-600 text-sky-600":"border-transparent text-gray-500"),children:[e.jsx(H,{className:"text-xl mr-2"}),"Bulk Batch Create"]})})]})}),e.jsx("div",{className:"relative flex flex-col min-w-0 break-words ",children:e.jsx("div",{className:"px-4 py-5 flex-auto h-fit",children:e.jsxs("div",{className:"tab-content tab-space",children:[e.jsx("div",{className:f===1?"block ":"hidden",id:"link1",children:e.jsx(he,{programDetails:a})}),a.programType=="1"?e.jsx("div",{className:f===3?"block":"hidden",id:"link3",children:e.jsx(ue,{programId:a.id,programDetails:a})}):null,e.jsx("div",{className:f===4?"block":"hidden",id:"link3",children:e.jsx(pe,{programId:a.id,programDetails:a})}),e.jsx("div",{className:f===5?"block":"hidden",id:"link3",children:e.jsx(ge,{programId:a.id,programDetails:a})}),e.jsx("div",{className:f===6?"block":"hidden",id:"link3",children:e.jsx(ye,{programId:a.id,programDetails:a})})]})})})]})})})};function be({peoplelist:s,questionList:i,id:r,batchData:b,schedulePop:t,setSchedulePop:y,next:a,previous:p,pgindex:d,page:g,totalCount:l,setRefresher:m,setLimit:x,setPage:C,setSearch:h,templateList:j,getOneBatch:Y}){return e.jsx(e.Fragment,{children:e.jsx(je,{peoplelist:s,id:r,batchData:b,questionList:i,schedulePop:t,setSchedulePop:y,next:a,previous:p,pgindex:d,page:g,totalCount:l,setLimit:x,setPage:C,templateList:j,setSearch:h,setRefresher:m,getOneBatch:Y})})}const Ne=({setBatchListPop:s})=>{const i=le(),r=()=>{i("/program")};return e.jsxs("button",{className:"bg-sky-600 h-[25px] w-[102px] m-[10px] px-5 font-[22px] rounded",onClick:r,children:[e.jsx(ne,{className:"inline-block mr-2"})," Back"]})};function we({id:s,setBatchListPop:i,batchData:r,schedulePop:b,setSchedulePop:t,getOneBatch:y}){const[a,p]=c.useState([]),[d,g]=c.useState([]),[l,m]=c.useState(""),[x,C]=c.useState(5),[h,j]=c.useState(0),[Y,O]=c.useState();c.useState(null);const{userData:f,signOut:B}=L(),[q,w]=c.useState(null),[_,I]=c.useState([]),M=async()=>{const k={Id:s};var E;let F=new URLSearchParams(Object.entries(k)).toString();E=await fetch(`http://15.206.237.179:8000/api/Teams/getAllUserInTranieeTeam/%7Bid%7D?filter=%7B%22limit%22%3A${x},%22start%22%3A${h},%22search%22%3A%22${l}%22%7D&access_token=${f==null?void 0:f.accessToken}`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:F});const A=await E.json();if(E.ok)console.log(A),A.code===404?console.error(A.msg):p(A.data);else{const n=A&&(A==null?void 0:A.message)||E.statusText;return Promise.reject(n)}};c.useEffect(()=>{s!==null&&(M(),V(),o())},[s,r,l,x,h,q]);const V=()=>{fetch(`http://15.206.237.179:8000/api/FormBatchquestions/list?filter=%7B%22limit%22%3A${x},%22start%22%3A${h},%22search%22%3A%22${l}%22%7D&access_token=${f==null?void 0:f.accessToken}`).then(async k=>{const E=await k.json();if(!k.ok){const F=E&&E.message||k.statusText;return Promise.reject(F)}g(E.data.list),O(E.data.totalCount)}).catch(k=>{g([]),console.error("There was an error!",k),k==="Token Expired"&&B()})},o=()=>{fetch(`http://15.206.237.179:8000/api/templateQuestions/listofTranieeBatchTemplate?filter=%7B%22limit%22%3A2000000,%22start%22%3A%22%22,%22search%22%3A%22%22%7D&access_token=${f==null?void 0:f.accessToken}`).then(async k=>{const E=await k.json();if(!k.ok){const F=E&&E.message||k.statusText;return Promise.reject(F)}I(E.data.list),O(E.data.totalCount)}).catch(k=>{I([]),console.error("There was an error!",k),k==="Token Expired"&&B()})},v=Y,S=v-5,R=()=>{if(Y%x==0)if(h<S)j(h+1);else return;else if(h<v)j(h+1);else return},J=()=>{h<=0||j(h-1)};return e.jsxs("div",{className:"flex w-full   bg-white rounded-md flex-col",children:[e.jsx(Ne,{programId:i}),e.jsxs("div",{className:"w-full py-4",children:[e.jsx("span",{className:"flex cursor-pointer items-center justify-between px-5  text-2xl font-semibold text-gray-600   border-gray-200",children:e.jsx("p",{children:r.programName})}),e.jsx(be,{id:s,batchData:r,questionList:d,peoplelist:a,schedulePop:b,setSchedulePop:t,next:R,previous:J,pgindex:S,page:h,totalCount:Y,setLimit:C,setPage:j,setSearch:m,setRefresher:w,templateList:_,getOneBatch:y})]})]})}const Ye=()=>{const{programId:s}=ce(),{userData:i,signOut:r}=L(),[b,t]=c.useState({}),y=()=>{fetch(`http://15.206.237.179:8000/api/programs/getProgramById/${s}?access_token=${i==null?void 0:i.accessToken}`).then(async a=>{const p=await a.json();if(console.log(p),!a.ok){const d=p&&p.message||a.statusText;return Promise.reject(d)}t(p.data)}).catch(a=>{t({}),console.error("There was an error!",a),(a==="Token Expired"||a==="Malformed User")&&r()})};return c.useEffect(()=>{s&&y()},[s]),e.jsx(e.Fragment,{children:e.jsx(we,{id:s,batchData:b,setBatchListPop:!1,getOneBatch:!1})})};export{Ye as default};
