import{r as a,p as R,a0 as $,j as c,Q as d}from"./index-PDBVLXQN.js";import{C as B,a as C}from"./CustomQuestionFeedback-Dcnwsr_e.js";import{v as E}from"./v4-D8aEg3BZ.js";const U=()=>{const[o,p]=a.useState([]),[i,y]=a.useState(null),[u,b]=a.useState(null),[Q,h]=a.useState("Loading..."),[f,T]=a.useState([]),[J,k]=a.useState(!1),[w,g]=a.useState({data:[],label:""}),[m,x]=a.useState(""),{userData:n,singOut:P}=R(),{batchId:I,asstype:q,assessmentId:S}=$(),j=e=>{var s=e,t=[];s.map(l=>{t=[...t,{...l,id:E()}]}),console.log(t,"opiuy"),m.length==0?(d.error("Name of Template is required"),t=[]):N(t)},N=async e=>{var v;var s=JSON.stringify(e);console.log(s,"lhg");var t={name:m,activeStatus:1,type:2,description:u,QuestionBunch:s},l;let A=new URLSearchParams(Object.entries(t)).toString();console.log(t),l=await fetch(`http://15.206.237.179:8000/api/templateQuestions/add?access_token=${n==null?void 0:n.accessToken}`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:A});const r=await l.json();console.log(r),l.ok?r.code===404?d.error(r.msg):(d.success("Questions Added!!"),k(!0)):(console.log("er"),d.error((v=r==null?void 0:r.error)==null?void 0:v.message))},O=()=>{fetch(`http://15.206.237.179:8000/api/Assessments/traineeBatchAssessmentdetailsById?id=${S}&access_token=${n==null?void 0:n.accessToken}`).then(async e=>{const s=await e.json();if(!e.ok){const t=s&&s.message||e.statusText;return h("Something went Wrong!!"),Promise.reject(t)}p(s.data.assessmentRes),b(s.data.assessmentRes.assessmentType),y(!0)}).catch(e=>{p([]),h("Redirecting..."),console.error("There was an error!",e)})};return a.useEffect(()=>{O()},[S,i]),a.useEffect(()=>{if(i){var e=JSON.parse(o.questionBunchOfAssessment);if(T(e),u=="feedback"){var s=JSON.parse(o==null?void 0:o.description);g(s)}else g({data:"",label:o==null?void 0:o.description})}},[i]),console.log(f),u==null?c.jsx("div",{className:"flex flex-col justify-center items-center h-screen",children:c.jsx("h5",{className:"text-3xl font-semibold leading-none text-gray-700 ",children:Q})}):u!=="feedback"?c.jsx("div",{className:"flex flex-col mt-5",children:c.jsx(B,{allQuestion:f,questionjson:i,setResult:j,setName:x,name:m})}):c.jsx("div",{className:"flex flex-col mt-5",children:c.jsx(C,{allQuestion:f,questionjson:i,setResult:j,setName:x,name:m,description:w})})};export{U as default};
