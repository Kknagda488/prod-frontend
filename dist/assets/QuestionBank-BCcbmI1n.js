import{r as b,j as l,a1 as g,p as j,Q as f}from"./index-PDBVLXQN.js";import{v as m}from"./v4-D8aEg3BZ.js";function N({setResult:h}){const[n,u]=b.useState([{id:m(),question:"",questionType:"mcq",point:"",answers:["",""],correctAnswer:""}]);b.useState([]);var w={id:m(),question:"",questionType:"mcq",point:"",answers:["",""],correctAnswer:""};console.log(n,"jkdj"),b.useState(),console.log(n,"oiuy");const y=e=>{const t=n.findIndex(c=>c.id===e);let s=[...n];if(t>=0){var o=s[t];o.answers.push("")}else console.warn(`Cannot remove : ${e}`);u(s)},d=(e,t)=>{const s=n.findIndex(r=>r.id===e),o=n[s].answers.findIndex(r=>r===t);let c=[...n];s>=0?c[s].answers.splice(o,1):console.warn(`Cannot remove : ${e}`),u(c)},p=e=>{var t;if(n.map(s=>(s.id===e&&(t=!0),s)),t){const s=n.findIndex(c=>c.id===e);let o=[...n];s>=0?(o[s],o.splice(s,1)):console.warn(`Cannot remove : ${e}`),u(o)}},i=()=>l.jsx("ul",{className:"flex flex-col w-full my-6 ",children:l.jsx("div",{className:"w-full  px-4 mx-auto mt-3",children:l.jsxs("div",{className:"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded-lg bg-blueGray-100 border-0",children:[l.jsx("div",{className:"rounded-t bg-white mb-0 px-6 py-6",children:l.jsx("h6",{className:"text-gray-700 w-full text-xl font-bold  ",children:"Add Quetions in QuestionBank"})}),l.jsx("div",{className:"flex-auto px-4 lg:px-10 py-10 pt-0 bg-violet-200",children:l.jsxs("div",{children:[n==null?void 0:n.map((e,t)=>{var s,o,c;return l.jsxs("div",{className:"my-4 border-b-2 pb-2 border-sky-500 ",children:[l.jsxs("div",{className:"text-center flex justify-between items-center",children:[l.jsxs("h6",{className:"text-blueGray-400 text-sm mt-3 mb-6 font-bold uppercase",children:["Question #",t+1]}),l.jsxs("button",{className:"bg-sky-500 text-white active:bg-sky-600 h-fit font-bold uppercase text-xs px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-1 ease-linear transition-all duration-150",type:"button",onClick:()=>p(e.id),children:["Remove Question #",t+1]})]}),l.jsxs("div",{className:"flex flex-wrap",children:[l.jsx("div",{className:"w-full lg:w-12/12 px-4",children:l.jsxs("div",{className:"relative w-full mb-3",children:[l.jsx("label",{className:"block uppercase text-blueGray-600 text-xs font-bold mb-2",htmlFor:"grid-password",children:"Question"}),l.jsx("input",{type:"text",className:"border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150",name:"question",placeholder:"Question",defaultValue:e.question,onBlur:r=>{e.question=r.target.value}})]})}),l.jsx("div",{className:"w-full lg:w-1/2 px-4",children:l.jsxs("div",{className:"relative w-full mb-3",children:[l.jsx("label",{className:"block uppercase text-blueGray-600 text-xs font-bold mb-2",htmlFor:"grid-password",children:"Question Type"}),l.jsxs("select",{className:"border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150",required:"required",name:"questionType",defaultValue:e.type,onChange:r=>{e.questionType=r.target.value,e.questionType=="multiopt"?e.correctAnswer=[]:e.correctAnswer="",e.answers=["",""],u([...n])},children:[l.jsxs("option",{value:e.questionType,selected:!0,hidden:!0,children:[(e==null?void 0:e.questionType)=="mcq"?"Multiple Choice":null," ",(e==null?void 0:e.questionType)=="fib"?"Fill in the Blanks":null," ",(e==null?void 0:e.questionType)=="tf"?"True or False":null," ",(e==null?void 0:e.questionType)=="multiopt"?"Multi-Option":null," ",(e==null?void 0:e.questionType)=="response"?"Response":null," ",(e==null?void 0:e.questionType)=="text"?"Select a Type":null]}),l.jsx("option",{value:"mcq",children:"Multiple Choice"}),l.jsx("option",{value:"fib",children:"Fill in the Blanks"}),l.jsx("option",{value:"tf",children:"True or False"}),l.jsx("option",{value:"multiopt",children:"Multi-Option"}),l.jsx("option",{value:"response",children:"Response"})]})]})}),l.jsx("div",{className:"w-full lg:w-1/2 px-4",children:l.jsxs("div",{className:"relative w-full mb-3",children:[l.jsx("label",{className:"block uppercase text-blueGray-600 text-xs font-bold mb-2",htmlFor:"grid-password",children:"Points"}),l.jsx("input",{id:"input-hide",type:"number",className:"border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150",name:"points",placeholder:"Points",defaultValue:e.point,onWheel:r=>r.target.blur(),onBlur:r=>e.point=r.target.value,required:!0})]})})]}),l.jsx("hr",{className:"mt-6 border-b-1 border-blueGray-300"}),l.jsx("h6",{className:"text-blueGray-400 text-sm mt-3 mb-6 font-bold uppercase",children:"Answer Information"}),(e==null?void 0:e.questionType)!=="response"?l.jsxs(l.Fragment,{children:[l.jsx("button",{className:"bg-sky-500 text-white active:bg-sky-600 font-bold uppercase text-xs px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-1 ease-linear transition-all duration-150",type:"button",onClick:()=>y(e.id),children:"Add Option"}),l.jsxs("div",{className:"flex  flex-wrap",children:[l.jsx("div",{className:"w-full flex flex-col lg:w-6/12 px-4",children:(s=e==null?void 0:e.answers)==null?void 0:s.map((r,a)=>l.jsxs("div",{className:"relative w-full mb-3",children:[l.jsxs("label",{className:"block uppercase text-blueGray-600 text-xs font-bold mb-2",htmlFor:"grid-password",children:["Option ",a+1]}),l.jsxs("div",{className:"flex ",children:[l.jsx("input",{type:"text",required:!0,defaultValue:r,placeholder:`Option ${a+1}`,className:"border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150",onBlur:x=>e.answers[a]=x.target.value}),l.jsxs("button",{type:"button",title:"Remove Option",className:"flex items-center text-red-500 text-md ",onClick:()=>{d(e.id,r)},children:[l.jsx(g,{className:"text-xl"})," #",a+1]})]})]},m()))}),l.jsx("div",{className:"w-full lg:w-6/12 px-4",children:l.jsxs("div",{className:"relative w-full mb-3",children:[l.jsx("label",{className:"block uppercase text-blueGray-600 text-xs font-bold mb-2",htmlFor:"grid-password",children:"Correct Option"}),e.questionType=="multiopt"?l.jsx("div",{className:"bg-white flex flex-col px-3 py-1 h-full",children:(o=e==null?void 0:e.answers)==null?void 0:o.map((r,a)=>l.jsxs("div",{className:"form-check  ",children:[l.jsx("input",{checked:e.correctAnswer.find(x=>x===a+1),className:" h-4 w-4 text-blue-400 bg-white rounded  bg-no-repeat bg-center bg-contain float-left mr-2 cursor-pointer focus:outline-none transition duration-200 mt-1 align-top",type:"checkbox",value:`${a+1}`,onChange:x=>{const v=e.correctAnswer.indexOf(x.target.value);v>-1?e.correctAnswer.splice(v,1):e.correctAnswer.push(parseInt(x.target.value))},name:`option#${a+1}`,id:`option#${a+1}`}),l.jsx("label",{className:"form-check-label inline-block  text-gray-700 font-semibold ",children:`Option #${a+1}`})]},m()))}):l.jsxs("select",{className:"border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150",required:"required",name:"correctOption",onBlur:r=>e.correctAnswer=r.target.value,children:[l.jsx("option",{selected:!0,disabled:!0,hidden:!0,value:"",children:"Select Correct Option"}),(c=e==null?void 0:e.answers)==null?void 0:c.map((r,a)=>l.jsx("option",{selected:a+1==parseInt(e.correctAnswer)?"selected":null,value:`${a+1}`,children:`option #${a+1}`},m()))]})]})})]})]}):l.jsx("div",{className:"w-full lg:w-12/12 px-4",children:l.jsxs("div",{className:"relative w-full mb-3",children:[l.jsx("label",{className:"block uppercase text-blueGray-600 text-xs font-bold mb-2",htmlFor:"grid-password",children:"Correct Answer"}),l.jsx("input",{type:"text",className:"border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150",name:"correctOption",placeholder:"Enter correct answer",defaultValue:e.correctAnswer,onBlur:r=>e.correctAnswer=r.target.value})]})}),l.jsx("hr",{className:"mt-6 border-b-1 border-blueGray-300"})]},t)}),l.jsxs("div",{className:"flex w-full justify-between items-center",children:[l.jsxs("button",{className:"bg-sky-500  text-white active:bg-sky-600 font-semibold  text-sm px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-1 ease-linear transition-all duration-150",type:"button",onClick:()=>u([...n,w]),children:["Add Question #",n.length+1]}),n.length==0?null:l.jsx("button",{className:"bg-sky-500 text-white active:bg-sky-600 font-semibold  text-sm px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-1 ease-linear transition-all duration-150",type:"submit",onClick:()=>h(n),children:"Submit & Save"})]})]})})]})})});return l.jsx("div",{className:"flex flex-col",children:l.jsx(i,{})})}function G(){const{userData:h}=j(),[n,u]=b.useState(!1),w=d=>{var p=d,i=[];p.map(e=>{if(e.questionType!=="response")Object.keys(e).filter(s=>{if(e[s]===""||e[s]===void 0||e[s]===null)return i.push(s)}),e.answers.filter((s,o)=>{if(s===""||s===void 0||s===null){var c=`option${o+1}`;return i.push({[c]:s})}});else{var t={id:e.id,question:e.question,questionType:e.questionType,point:e.point};Object.keys(t).filter(s=>{if(t[s]===""||t[s]===void 0||t[s]===null)return i.push(s)})}}),console.log(i,"opiuy"),i.length!==0?f.error("Fill up the required fields"):p.forEach(e=>{var t={...e,id:m()};return y(t),e})},y=async d=>{var s;const p={name:d.question,type:d.questionType,isRequired:1,options:JSON.stringify(d.answers),questionBunch:JSON.stringify(d)};var i;console.log(p);let e=new URLSearchParams(Object.entries(p)).toString();console.log(e),i=await fetch(`http://15.206.237.179:8000/api/FormBatchquestions/add?access_token=${h==null?void 0:h.accessToken}`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:e});const t=await i.json();console.log(t),i.ok?(console.log(t),t.code===404?f.error(t.msg):(u(!0),f.success("Question Added Succesfully !!"),window.close())):(console.log("er"),f.error((s=t==null?void 0:t.error)==null?void 0:s.message))};return l.jsx("div",{className:"flex flex-col w-full mt-10",children:l.jsx(N,{setResult:w})})}export{G as default};
