import{m as X,p as Y,r as s,j as e,Q as i}from"./index-PDBVLXQN.js";import{C as Z}from"./index.esm-3mRNvFvF.js";import{S as k}from"./react-select.esm-QO7Mfydt.js";import{R as ee}from"./RichTextEditor-DxNNB7hl.js";import"./index-ucbQh0HC.js";const de=()=>{const C=X(),{userData:l,signOut:u}=Y(),[h,E]=s.useState("1");s.useState(null);const[y,O]=s.useState(""),[b,j]=s.useState([]);function $(a){E(a.target.value)}function q(a){console.log(a.target.value),O(a.target.value)}s.useState(null);const[m,N]=s.useState([]),[d,F]=s.useState([]),[x,_]=s.useState(null),[g,w]=s.useState([]),[n,v]=s.useState(null),[D,I]=s.useState(null),[c,P]=s.useState(null),[ae,p]=s.useState([]);s.useState(!1),s.useState(!1),s.useState([]);const[re,L]=s.useState(""),V=a=>{const r=a.target.files[0];if(r){const t=r.name;L(t),W(r);const o=t.split(".");j([o[0]])}},[f,A]=s.useState(""),R=a=>{A(a)},S={container:a=>({...a,flex:1}),control:a=>({...a,border:"1px solid rgb(209 213 219)",boxShadow:"none","&:hover":{border:"1px solid rgb(17 24 39)"}}),input:a=>({...a,color:"rgb(75 85 99)",paddingLeft:"6px",paddingBottom:"3px",fontSize:"1rem",lineHeight:"1.25rem"}),placeholder:a=>({...a,color:"#a1a9bb",paddingLeft:"6px",fontSize:"0.870rem",lineHeight:"1.25rem"})},B=()=>{fetch(`http://15.206.237.179:8000/api/clients/listofclient?filter=%7B%22search%22%3A%22%22%7D&access_token=${l==null?void 0:l.accessToken}`).then(async a=>{const r=await a.json();if(!a.ok){const t=r&&r.message||a.statusText;return Promise.reject(t)}N(r.data)}).catch(a=>{N([]),console.error("There was an error!",a),a==="Token Expired"&&u()})},M=a=>{F(a),_(a.data),v(null),P(null),p([])},z=()=>{fetch(`http://15.206.237.179:8000/api/projects/listofProgramName?id=${x}&filter=%7B%22search%22%3A%22%22%7D&access_token=${l==null?void 0:l.accessToken}`).then(async a=>{const r=await a.json();if(!a.ok){const t=r&&r.message||a.statusText;return Promise.reject(t)}w(r.data)}).catch(a=>{w([]),console.error("There was an error!",a),a==="Token Expired"&&u()})},H=a=>{v(a),P(a.data)},U=()=>{fetch(`http://15.206.237.179:8000/api/programTrainers/getprogramTrainersName?id=${c}&access_token=${l==null?void 0:l.accessToken}`).then(async a=>{const r=await a.json();if(!a.ok){const t=r&&r.message||a.statusText;return Promise.reject(t)}console.log(r.data),p(r.data)}).catch(a=>{p([]),console.error("There was an error!",a),a==="Token Expired"&&u()})};s.useEffect(()=>{B()},[]),s.useEffect(()=>{x&&z()},[x]),s.useEffect(()=>{c&&U()},[c]);const Q=m==null?void 0:m.map(a=>({data:a==null?void 0:a.client_id,label:a==null?void 0:a.client_name})),G=g==null?void 0:g.map(a=>({data:a==null?void 0:a.project_id,label:`${a==null?void 0:a.project_title} ~ ProgramId: ${a==null?void 0:a.project_id} ~ ${a!=null&&a.location_of_training?a==null?void 0:a.location_of_training:"No location allocate"} `})),J=a=>{a.preventDefault();var r={};Array.from(a.currentTarget.elements).forEach(t=>{t.name&&(r[t.name]=t.value)}),f&&(r.objectives=f),console.log(r,"formData"),K(r)},K=async a=>{var T;var r;let t=new URLSearchParams(Object.entries(a)).toString();r=await fetch(`http://15.206.237.179:8000/api/programs/add?access_token=${l==null?void 0:l.accessToken}`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:t});const o=await r.json();r.ok?o.status==="failure"?i.error(o.msg):o.code==409?i.error(o.msg):(i.success(" Program created and emails sent successfully !!"),C("/program")):i.error((T=o==null?void 0:o.error)==null?void 0:T.message)};console.log(n,"selectedProgram");const W=async a=>{try{const r=new FormData;r.append("file",a);const t=await fetch(`http://15.206.237.179:8000/api/programOutlines/uploadFile/${n?n.data:null}?access_token=${l==null?void 0:l.accessToken}`,{method:"POST",body:r}),o=await t.json();t.ok?(i.success("File uploaded successfully."),j([a.name]),I(o.data.id),console.log("File uploaded successfully.")):(console.error("Failed to upload file."),i.error("File uploaded successfully."))}catch(r){console.error("Error uploading file:",r),i.error("File uploaded successfully.")}};return e.jsx("div",{children:e.jsx("div",{className:"flex mt-1 flex-col w-full justify-center",children:e.jsx("div",{className:"relative py-5 w-full  px-1 ",children:e.jsx("div",{className:"relative px-4 py-2  rounded-md  bg-white ",children:e.jsxs("div",{className:"w-full mx-auto",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 bg-sky-500 rounded-full flex flex-shrink-0 justify-center items-center text-white text-2xl font-semibold",children:e.jsx(Z,{})}),e.jsxs("div",{className:"block pl-2 font-semibold text-xl self-start text-gray-700",children:[e.jsx("h2",{className:"leading-relaxed",children:"Create a Program"}),e.jsx("p",{className:"text-sm text-gray-500 font-normal leading-relaxed",children:"Enter the program details."})]})]}),e.jsxs("form",{onSubmit:J,className:"divide-y divide-gray-200",children:[e.jsx("div",{className:"flex flex-col w-full justify-between py-8 text-base leading-6 space-x-4 text-gray-700 sm:text-lg sm:leading-7",children:e.jsxs("div",{className:"flex flex-col w-full space-y-1",children:[e.jsxs("div",{className:"flex flex-wrap",children:[e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Client Name*"}),e.jsx("div",{className:"relative focus-within:text-gray-600 text-gray-400",children:e.jsx(k,{options:Q,onChange:M,value:d,styles:S,placeholder:"Select Client",getOptionValue:a=>a.data})}),e.jsx("input",{type:"text",name:"clientName",className:"hidden px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Client Name",required:!0,defaultValue:d==null?void 0:d.label}),e.jsx("input",{type:"text",name:"clientId",className:"hidden px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Client Name",required:!0,defaultValue:d==null?void 0:d.data})]}),e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsxs("div",{className:"flex justify-between w-full items-center",children:[e.jsx("label",{className:"leading-loose",children:"Program Name*"}),e.jsxs("label",{className:"leading-loose",children:["Program Id:",n?n.data:null]})]}),e.jsx("div",{className:"relative focus-within:text-gray-600 text-gray-400",children:e.jsx(k,{options:G,onChange:H,value:n,styles:S,placeholder:"Select Program",getOptionValue:a=>a.data})}),e.jsx("input",{type:"text",name:"programName",className:"hidden px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program Name",defaultValue:n==null?void 0:n.label,required:!0}),e.jsx("input",{type:"text",name:"programId",className:"hidden px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program Id",defaultValue:c,required:!0})]})]}),e.jsx("div",{className:"flex flex-wrap",children:e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Program Type*"}),e.jsxs("select",{name:"programType",required:!0,onChange:q,value:y,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select program type"}),e.jsx("option",{value:"1",children:"Open"}),e.jsx("option",{value:"0",children:"Close"})]})]})}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Program Start Date*"}),e.jsx("input",{type:"date",name:"programStartDate",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program  Start Date",required:!0})]}),e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Program Start Time*"}),e.jsx("input",{type:"time",name:"programStartTime",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program Start Time",required:!0})]}),e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Program End Date*"}),e.jsx("input",{type:"date",name:"programEndDate",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program End Date",required:!0})]}),e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Program End Time*"}),e.jsx("input",{type:"time",name:"programEndTime",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program End Time",required:!0})]})]}),e.jsxs("div",{className:"flex flex-wrap",children:[y=="1"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Nomination End Date*"}),e.jsx("input",{type:"date",name:"nominationDate",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program Date/Time",required:!0})]}),e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Nomination End Time*"}),e.jsx("input",{type:"time",name:"nominationTime",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program Date/Time",required:!0})]}),e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Nomination Limit*"}),e.jsx("input",{type:"number",name:"nominationLimit",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"Program nomination limit",required:!0})]}),e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Program Outline"}),e.jsx("select",{name:"programOutline",value:D,className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",children:b&&b.map((a,r)=>e.jsx("option",{value:a,children:a}))})]}),e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Files"}),e.jsx("input",{type:"file",name:"files",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"choose file",onChange:V})]})]}):null,e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Training Mode*"}),e.jsxs("select",{name:"trainingType",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",value:h,onChange:$,required:!0,children:[e.jsx("option",{value:"1",children:"Class Room Training"}),e.jsx("option",{value:"2",children:"Virtual Training"})]})]}),h=="1"?e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Location*"}),e.jsx("input",{type:"text",name:"location",className:"px-4 py-2 border focus:ring-gray-500 focus:border-gray-900 w-full sm:text-sm border-gray-300 rounded-md focus:outline-none text-gray-600",placeholder:"City",required:!0})]}):null,e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Program Color*"}),e.jsx("input",{type:"color",name:"color",className:"block w-full",placeholder:"Program Color",required:!0})]}),e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Status*"}),e.jsxs("select",{name:"status",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[e.jsx("option",{value:"1",children:"Active"}),e.jsx("option",{value:"0",children:"In Active"})]})]}),e.jsxs("div",{className:"w-1/2 px-2",children:[e.jsx("label",{className:"leading-loose",children:"Objectives"}),e.jsx(ee,{value:f,onChange:R})]})]})]})}),e.jsx("div",{className:"py-4  space-x-4",children:e.jsx("button",{type:"submit",className:"bg-sky-500 flex-inline justify-center items-center text-white px-4 py-2 rounded-md focus:outline-none",children:"Create Program"})})]})]})})})})})};export{de as default};
